<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check Consistency Between Comex Data and Conference Files — comex_check • comexr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check Consistency Between Comex Data and Conference Files — comex_check"><meta name="description" content="This function verifies the consistency between downloaded Comex data and the corresponding conference files provided by the official source (MDIC). It checks if the aggregated totals for specific columns match between the two sources."><meta property="og:description" content="This function verifies the consistency between downloaded Comex data and the corresponding conference files provided by the official source (MDIC). It checks if the aggregated totals for specific columns match between the two sources."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">comexr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/comexr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/arrecadacao_ii_ipi_vinculado_e_comex.html">Análise da Arrecadação de Imposto de Importação (II) e IPI Vinculado sobre as Importações Brasileiras</a></li>
    <li><a class="dropdown-item" href="../articles/auto_china_brazil.html">Dados de importações de carros (veículos de passageiros) usando o comexr</a></li>
    <li><a class="dropdown-item" href="../articles/CSV-vs-Parquet.html">CSV vs Parquet</a></li>
    <li><a class="dropdown-item" href="../articles/deflacionando_o_comex.html">Deflacionando o Comex</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/leoniedu/comexr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Check Consistency Between Comex Data and Conference Files</h1>
      <small class="dont-index">Source: <a href="https://github.com/leoniedu/comexr/blob/HEAD/R/comexstat2.R" class="external-link"><code>R/comexstat2.R</code></a></small>
      <div class="d-none name"><code>comex_check.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function verifies the consistency between downloaded Comex data and the corresponding conference files provided by the official source (MDIC). It checks if the aggregated totals for specific columns match between the two sources.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">comex_check</span><span class="op">(</span>years <span class="op">=</span> <span class="cn">NULL</span>, directions <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="st">"ncm"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>A numeric vector specifying the years to check. If <code>NULL</code> (default), all available years are checked.</p></dd>


<dt id="arg-directions">directions<a class="anchor" aria-label="anchor" href="#arg-directions"></a></dt>
<dd><p>A character vector specifying the directions of trade to check: 'imp' (imports) and/or 'exp' (exports). If <code>NULL</code> (default), both directions are checked.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>A character string indicating the type of Comex data: 'ncm' (Nomenclatura Comum do Mercosul) or 'hs4' (Harmonized System 4-digit). Defaults to 'ncm'.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>No direct return value. The function prints a message indicating whether the check passed ('All clear!') or if there are mismatches between the data and conference files. If mismatches are found, a table displaying the discrepancies is printed and an error is raised.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function performs the following checks:</p><ol><li><p><strong>Input Validation:</strong> Ensures that the <code>type</code> argument is valid ('ncm' or 'hs4') and has a length of 1.</p></li>
<li><p><strong>Data Retrieval:</strong> Reads the relevant Comex data (based on the <code>type</code>) and the corresponding conference files.</p></li>
<li><p><strong>Filtering:</strong> Filters the data and conference files based on the specified <code>years</code> and <code>directions</code> if provided.</p></li>
<li><p><strong>Aggregation:</strong> Aggregates the Comex data by <code>year</code> and <code>direction</code> and calculates sums for relevant columns.</p></li>
<li><p><strong>Comparison:</strong> Compares the aggregated sums from the Comex data with the totals in the conference files.</p></li>
<li><p><strong>Mismatch Reporting:</strong> If any mismatches are found, a table highlighting the differences is printed to the console.</p></li>
<li><p><strong>Error Handling:</strong> If mismatches exist, the function raises an error to stop further analysis.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Check consistency for all NCM data from 2020 onwards</span></span></span>
<span class="r-in"><span><span class="fu">comex_check</span><span class="op">(</span>years <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2023</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check consistency for only import data (NCM)</span></span></span>
<span class="r-in"><span><span class="fu">comex_check</span><span class="op">(</span>directions <span class="op">=</span> <span class="st">'imp'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check consistency for HS4 data in 2022</span></span></span>
<span class="r-in"><span><span class="fu">comex_check</span><span class="op">(</span>years <span class="op">=</span> <span class="fl">2022</span>, type <span class="op">=</span> <span class="st">'hs4'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eduardo Leoni.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

