% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/process.R
\name{comex_roll}
\alias{comex_roll}
\title{Calculate Rolling Sums for Comex Data}
\usage{
comex_roll(
  data,
  x = c("qt_stat", "kg_net", "fob_", "freight_", "insurance_", "cif_"),
  k = 12
)
}
\arguments{
\item{data}{A data frame or tibble containing Comex data, with a \code{date} column.}

\item{x}{A character vector specifying the column names for which to calculate rolling sums.
Defaults to \code{c("qt_stat", "kg_net", "fob_usd", "freight_usd", "insurance_usd", "cif_usd")}.}

\item{k}{An integer specifying the window size (in months) for the rolling sum calculation. Defaults to 12.}
}
\value{
A modified version of the input \code{data}, with new columns added for each column in \code{x}.
The new column names are of the format "{original_col_name}_{k}", where \code{k} is the window size.
These new columns contain the rolling sums for the corresponding original columns.
}
\description{
This function computes rolling sums over a specified window for selected columns in a Comex (Brazilian trade) dataset.
}
\details{
This function uses the \code{slider} package's \code{slide_index_dbl} function to efficiently calculate rolling sums.
It's particularly useful for analyzing trends in Comex data over time.

The rolling sum for each date is calculated by summing the values from the current date up to \code{k-1} months prior.
If there are fewer than \code{k} months of data available before a given date, the available data is used for the sum.
}
\examples{
library(dplyr)
library(lubridate)

# Create sample Comex data
set.seed(123)  # For reproducibility
comex_data <- tibble(
  date = seq(from = ymd("2023-01-01"), to = ymd("2023-12-01"), by = "month"),
  qt_stat = rpois(12, lambda = 100),
  fob_usd = runif(12, min = 500, max = 2000)
)

# Calculate 6-month rolling sums for 'qt_stat' and 'fob_usd'
rolled_data <- comex_roll(comex_data, x = c("qt_stat", "fob_usd"), k = 6)

}
